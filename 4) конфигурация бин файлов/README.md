Устанавливаем на наш хост клиппер (инструкций в интернете полно) и переходим в папку конфигурации клиппера:
```shell
~cd
cd klipper
make menuconfig
``` 
# и вбиваем вот такие параметры для генерации проишвки платы головы
![eboard](https://i.ibb.co/pz9dkrV/Screenshot-5.png)
```shell
make clean
make
```
скачиваем получившейся бинарник.

# для прошивки платы майнбоард вот такие
```shell
make menuconfig
``` 
![mainboard](https://i.ibb.co/xGCpB4f/Screenshot-6.png)
```shell
make clean
make
```
скачиваем получившейся бинарник.
Разница межуд ними не велика, но для PB9 у майбоард нужно установить инверсию сразу, что бы при старте системы сто лне грелся.
компилируем , скачиваем и с помощью программатора стлинк и программного обеспечения stlink utility или stm32cubeprog  зашиваем наши микроконтроллеры.
Переходим к следующему пункту, подключение

Подключаем к STLINK плату головы
Распиновка eboard
   vcc - 3.3V
   GND-GND
   DIO - SWDIO
   CLK-SWDCLK
Запускаем кубепрог 
![cubeprog]()
Настройки выставите как у меня, и жмем connect, в случае есил камень не подключился , понизьте частоту до 25 кгц, а reset mode переведите в  режи core reset и переподжключите  программатор.
В случае успеха вы увидите следующую картинку 
![cubeprog_1]()
Нажмите кнопку open file и выберите скомпилированную и скаченную ранее прошивку для вашего микрроконтроллера и нажмите кнопку download
После чего начнется загрузка прошивки в мсу. По завершению  кубепрог оповестит вас об успешнйо прошивке.

Теперь перейдем к подключению платы mainboard 
Распиновка mineboard
   GND-GND
   DIO - SWDIO
   CLK-SWDCLK
   vcc -  не подключаем, стлинк не потянет питание всей платы mainboard, прост овключите питание принтера
 Остальная прошивка аналогична прошивке eboard
